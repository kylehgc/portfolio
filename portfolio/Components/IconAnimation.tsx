import { motion } from 'framer-motion'
import useThemeColors from '../Hooks/useThemeColors'

interface Props {
	setDone: React.Dispatch<React.SetStateAction<boolean>>
}

const IconAnimation: React.FC<Props> = ({ setDone }) => {
	const { secondary } = useThemeColors()
	const transition = { ease: 'easeInOut' }
	const handleAnimationComplete = (index: number) => {
		if (index === 3) {
			setDone(true)
		}
	}

	const letterPaths = [
		'm 66.147812,89.947136 -2.460938,-2.859375 16.195313,-17.976563 0.09375,-0.117187 -2.554688,-0.328125 v -2.976563 h 10.945313 v 2.976563 l -3.210938,0.585937 z m -8.109375,9.867187 v -2.953125 l 3.820312,-0.65625 V 69.322136 l -3.820312,-0.65625 v -2.976563 h 12.257812 v 2.976563 l -3.820312,0.65625 v 26.882812 l 3.820312,0.65625 v 2.953125 z m 20.15625,0 v -2.953125 l 2.8125,-0.328125 -0.02344,-0.02344 -9.445312,-13.101563 2.578125,-3.632812 12.328125,16.5 3.140625,0.585937 v 2.953125 z',
		'm 93.218124,99.814323 v -2.953125 l 3.820313,-0.65625 V 69.322136 l -3.820313,-0.65625 v -2.976563 h 12.257816 v 2.976563 l -3.82032,0.65625 v 11.789062 h 16.3125 V 69.322136 l -3.82031,-0.65625 v -2.976563 h 3.82031 4.61719 3.82031 v 2.976563 l -3.82031,0.65625 v 26.882812 l 3.82031,0.65625 v 2.953125 h -12.25781 v -2.953125 l 3.82031,-0.65625 V 84.744011 h -16.3125 v 11.460937 l 3.82032,0.65625 v 2.953125 z',
		'm 92.436874,147.3065 q -4.734375,0 -8.203125,-2.17968 -3.46875,-2.20313 -5.34375,-6.09375 -1.875,-3.89063 -1.875,-9 v -0.5625 q 0,-5.15625 1.875,-9.02344 1.898438,-3.89063 5.179688,-6.07031 3.28125,-2.17969 7.453125,-2.17969 3.984375,0 6.75,0.91406 2.789058,0.91406 4.757808,2.46094 v 6.89062 h -3.796871 l -0.492187,-4.94531 q -1.148438,-0.75 -2.8125,-1.125 -1.664063,-0.39844 -3.9375,-0.39844 -2.929688,0 -5.273438,1.6875 -2.34375,1.6875 -3.703125,4.71094 -1.359375,3 -1.359375,7.03125 v 0.60938 q 0,4.07812 1.242188,7.125 1.265625,3.02343 3.679687,4.71093 2.414063,1.66407 5.859375,1.66407 2.34375,0 3.960938,-0.39844 1.617187,-0.42188 2.859375,-1.07813 v -8.01562 l -6.539063,-0.23438 v -3.39843 h 11.156246 v 13.21875 q -1.47656,1.38281 -4.242183,2.53125 -2.742188,1.14843 -7.195313,1.14843 z',
		'm 124.59312,147.3065 q -5.13281,0 -8.57812,-2.25 -3.42188,-2.25 -5.15625,-6.16406 -1.71094,-3.91406 -1.71094,-8.88281 v -0.49219 q 0,-5.01562 1.80469,-8.90625 1.80469,-3.91406 5.17969,-6.16406 3.375,-2.25 8.0625,-2.25 3.30468,0 6.04687,1.03125 2.74219,1.03125 4.54688,2.625 v 7.35937 h -3.67969 l -0.49219,-5.39062 q -0.75,-0.58594 -1.73437,-0.98438 -0.96094,-0.39843 -2.15625,-0.60937 -1.17188,-0.21094 -2.55469,-0.21094 -3.35156,0 -5.67188,1.73438 -2.32031,1.71093 -3.51562,4.73437 -1.19531,3.02344 -1.19531,6.98438 v 0.53906 q 0,4.28906 1.26562,7.33594 1.28906,3.02343 3.72656,4.61718 2.46094,1.59375 5.97657,1.59375 1.64062,0 3.21093,-0.39843 1.57032,-0.39844 2.60157,-1.03125 l 0.51562,-4.75782 h 3.60938 v 7.40625 q -1.92188,1.19532 -4.59375,1.875 -2.67188,0.65625 -5.50782,0.65625 z',
	]

	const strokeStyles = {
		fill: 'transparent',
		initial: { pathLength: 0 },
		animate: { pathLength: 1 },
		stroke: secondary,
		strokeWidth: 2,
	}

	return (
		<>
			<motion.svg
				height={'200'}
				width={'200'}
				xmlns="http://www.w3.org/2000/svg"
			>
				<motion.path
					fill="black"
					strokeLinecap={'round'}
					stroke={secondary}
					strokeWidth={6}
					initial={{ pathLength: 0 }}
					animate={{ pathLength: 1 }}
					transition={{ ...transition, duration: 0.5 }}
					d="m14.99999,101.92857l35.4643,-70.92857l94.57145,0l35.46428,70.92857l-35.46428,70.92857l-94.57145,0l-35.4643,-70.92857z"
				/>
				{letterPaths.map((path, index) => (
					<motion.path
						key={index}
						d={path}
						{...strokeStyles}
						onAnimationComplete={() => {
							handleAnimationComplete(index)
						}}
						transition={{
							duration: 0.3,
							...transition,
							delay: 0.5 + 0.3 * index,
						}}
					/>
				))}
			</motion.svg>
		</>
	)
}

export default IconAnimation
